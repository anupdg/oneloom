window.selection={},document.addEventListener("DOMContentLoaded",function(){!function e(){let t=WALK.getViewer();if(!t){setTimeout(e,500);return}console.log("Shapespark viewer initialized"),t.onApiUserStateChanged(function(e,t){let n=e.replace("MaterialPicker:","");window.selection[n]=t,console.log("Material changed:",n,t),window.parent.postMessage({type:"SELECTION_UPDATE",payload:{selection:window.selection}},"*")})}()});